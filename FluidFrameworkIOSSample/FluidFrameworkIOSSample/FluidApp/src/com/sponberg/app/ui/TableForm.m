//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: src-delomboked/com/sponberg/app/ui/TableForm.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "com/sponberg/app/SampleApp.h"
#include "com/sponberg/app/datastore/app/DSUser.h"
#include "com/sponberg/app/form/SignupForm.h"
#include "com/sponberg/app/ui/Screen.h"
#include "com/sponberg/app/ui/TableForm.h"
#include "com/sponberg/fluid/FluidApp.h"
#include "com/sponberg/fluid/GlobalState.h"
#include "com/sponberg/fluid/datastore/DatastoreTransaction.h"
#include "com/sponberg/fluid/datastore/SQLResultList.h"
#include "com/sponberg/fluid/layout/ActionListener.h"
#include "com/sponberg/fluid/layout/UIService.h"
#include "java/io/PrintStream.h"
#include "java/lang/Long.h"
#include "java/lang/System.h"

@implementation FATableForm

- (void)load__WithFFTFluidApp:(FFTFluidApp *)fluidApp {
  FASampleApp *app = (FASampleApp *) check_class_cast(fluidApp, [FASampleApp class]);
  [((FASampleApp *) nil_chk(app)) addScreenListenerWithNSString:FAScreen_get_TableForm_() withFFTScreenListener:self];
  (void) [((FFTFluidApp_AddActionListenerBuilder *) nil_chk([app addActionListenerWithNSStringArray:[IOSObjectArray arrayWithObjects:(id[]){ FAScreen_get_TableForm_(), FAScreen_ScreenTableForm_get_SignupForm_(), FAScreen_TableLayoutSignupForm_get_Where_() } count:3 type:[IOSClass classWithClass:[NSString class]]]])) listenerWithFFTActionListener:[[FATableForm_$1 alloc] init]];
  (void) [((FFTFluidApp_AddActionListenerBuilder *) nil_chk([app addActionListenerWithNSStringArray:[IOSObjectArray arrayWithObjects:(id[]){ FAScreen_get_TableForm_(), FAScreen_ScreenTableForm_get_SignupForm_(), FAScreen_TableLayoutSignupForm_get_When_() } count:3 type:[IOSClass classWithClass:[NSString class]]]])) listenerWithFFTActionListener:[[FATableForm_$2 alloc] init]];
  (void) [((FFTFluidApp_AddActionListenerBuilder *) nil_chk([app addActionListenerWithNSStringArray:[IOSObjectArray arrayWithObjects:(id[]){ FAScreen_get_TableForm_(), FAScreen_ScreenTableForm_get_SignupForm_(), FAScreen_TableLayoutSignupForm_get_Submit_(), FAScreen_TableLayoutSignupForm_RowSubmit_get_Submit_() } count:4 type:[IOSClass classWithClass:[NSString class]]]])) listenerWithFFTActionListener:[[FATableForm_$3 alloc] init]];
}

- (void)screenWillAppear {
  FFTDatastoreTransaction *txn = [[FFTDatastoreTransaction alloc] init];
  [txn start];
  FFTSQLResultList *result = [((FFTDatastoreTransaction_QueryBuilder *) nil_chk([((FFTDatastoreTransaction_QueryBuilder *) nil_chk([((FFTDatastoreTransaction_QueryBuilder *) nil_chk([txn queryWithIOSClass:[IOSClass classWithClass:[FADSUser class]]])) selectWithNSStringArray:[IOSObjectArray arrayWithObjects:(id[]){ FADSUser_get_email_(), FADSUser_get_phone_(), FADSUser_get_name_() } count:3 type:[IOSClass classWithClass:[NSString class]]]])) limitWithInt:1])) execute];
  if ([((FFTSQLResultList *) nil_chk(result)) size] > 0) {
    [((FASignupForm *) nil_chk([((FASampleApp *) nil_chk([FASampleApp getApp])) getQuoteForm])) setUserWithFADSUser:[result next]];
  }
  else {
    (void) [txn insertWithId:[[FADSUser alloc] init]];
  }
  [txn commit];
}

- (void)screenDidDisappear {
  FFTDatastoreTransaction *txn = [[FFTDatastoreTransaction alloc] init];
  [txn start];
  [((FFTDatastoreTransaction_UpdateBuilder *) nil_chk([txn updateWithId:[((FASignupForm *) nil_chk([((FASampleApp *) nil_chk([FASampleApp getApp])) getQuoteForm])) getUser]])) execute];
  [txn commit];
}

- (void)screenDidAppear {
}

- (void)screenWasRemoved {
}

- (IOSObjectArray *)getSupportedPlatforms {
  return nil;
}

- (id)init {
  return [super init];
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "load__WithFFTFluidApp:", "load", "V", 0x1, NULL },
    { "screenWillAppear", NULL, "V", 0x1, NULL },
    { "screenDidDisappear", NULL, "V", 0x1, NULL },
    { "screenDidAppear", NULL, "V", 0x1, NULL },
    { "screenWasRemoved", NULL, "V", 0x1, NULL },
    { "getSupportedPlatforms", NULL, "[Ljava.lang.String;", 0x1, NULL },
    { "init", NULL, NULL, 0x1, NULL },
  };
  static J2ObjcClassInfo _FATableForm = { "TableForm", "com.sponberg.app.ui", NULL, 0x1, 7, methods, 0, NULL, 0, NULL};
  return &_FATableForm;
}

@end

@implementation FATableForm_$1

- (void)userTappedWithFFTActionListener_EventInfo:(FFTActionListener_EventInfo *)info {
  [((id<FFTUIService>) nil_chk([((FFTFluidApp *) nil_chk(FFTGlobalState_get_fluidApp__())) getUiService])) pushLayoutWithNSString:FAScreen_get_SearchWhere_()];
}

- (id)init {
  return [super init];
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "userTappedWithFFTActionListener_EventInfo:", "userTapped", "V", 0x1, NULL },
    { "init", NULL, NULL, 0x0, NULL },
  };
  static J2ObjcClassInfo _FATableForm_$1 = { "$1", "com.sponberg.app.ui", "TableForm", 0x8000, 2, methods, 0, NULL, 0, NULL};
  return &_FATableForm_$1;
}

@end

@implementation FATableForm_$2

- (void)userTappedWithFFTActionListener_EventInfo:(FFTActionListener_EventInfo *)info {
  [((id<FFTUIService>) nil_chk([((FFTFluidApp *) nil_chk(FFTGlobalState_get_fluidApp__())) getUiService])) pushLayoutWithNSString:FAScreen_get_PickWhen_()];
}

- (id)init {
  return [super init];
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "userTappedWithFFTActionListener_EventInfo:", "userTapped", "V", 0x1, NULL },
    { "init", NULL, NULL, 0x0, NULL },
  };
  static J2ObjcClassInfo _FATableForm_$2 = { "$2", "com.sponberg.app.ui", "TableForm", 0x8000, 2, methods, 0, NULL, 0, NULL};
  return &_FATableForm_$2;
}

@end

@implementation FATableForm_$3

- (void)userTappedWithFFTActionListener_EventInfo:(FFTActionListener_EventInfo *)info {
  [((JavaIoPrintStream *) nil_chk(JavaLangSystem_get_out_())) printlnWithNSString:@"User tapped"];
}

- (id)init {
  return [super init];
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "userTappedWithFFTActionListener_EventInfo:", "userTapped", "V", 0x1, NULL },
    { "init", NULL, NULL, 0x0, NULL },
  };
  static J2ObjcClassInfo _FATableForm_$3 = { "$3", "com.sponberg.app.ui", "TableForm", 0x8000, 2, methods, 0, NULL, 0, NULL};
  return &_FATableForm_$3;
}

@end
